var swfobject=function(){var AQ="undefined",Ac="object",AB="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",Ad="application/x-shockwave-flash",AC="SWFObjectExprInst",AW="onreadystatechange",AF=window,Ak=document,Aa=navigator,AA=false,Z=[Am],Af=[],AG=[],AL=[],Ai,AD,AP,AS,AK=false,At=false,Ag,AN,Ah=true,AH=function(){var A=typeof Ak.getElementById!=AQ&&typeof Ak.getElementsByTagName!=AQ&&typeof Ak.createElement!=AQ,E=Aa.userAgent.toLowerCase(),C=Aa.platform.toLowerCase(),H=C?/win/.test(C):/win/.test(E),J=C?/mac/.test(C):/mac/.test(E),G=/webkit/.test(E)?parseFloat(E.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,D=!+"\v1",F=[0,0,0],K=null;if(typeof Aa.plugins!=AQ&&typeof Aa.plugins[AB]==Ac){K=Aa.plugins[AB].description;if(K&&!(typeof Aa.mimeTypes!=AQ&&Aa.mimeTypes[Ad]&&!Aa.mimeTypes[Ad].enabledPlugin)){AA=true;D=false;K=K.replace(/^.*\s+(\S+\s+\S+$)/,"$1");F[0]=parseInt(K.replace(/^(.*)\..*$/,"$1"),10);F[1]=parseInt(K.replace(/^.*\.(.*)\s.*$/,"$1"),10);F[2]=/[a-zA-Z]/.test(K)?parseInt(K.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0;}}else{if(typeof AF.ActiveXObject!=AQ){try{var I=new ActiveXObject(X);if(I){K=I.GetVariable("$version");if(K){D=true;K=K.split(" ")[1].split(",");F=[parseInt(K[0],10),parseInt(K[1],10),parseInt(K[2],10)];}}}catch(B){}}}return{w3:A,pv:F,wk:G,ie:D,win:H,mac:J};}(),Aj=function(){if(!AH.w3){return ;}if((typeof Ak.readyState!=AQ&&Ak.readyState=="complete")||(typeof Ak.readyState==AQ&&(Ak.getElementsByTagName("body")[0]||Ak.body))){Ao();}if(!AK){if(typeof Ak.addEventListener!=AQ){Ak.addEventListener("DOMContentLoaded",Ao,false);}if(AH.ie&&AH.win){Ak.attachEvent(AW,function(){if(Ak.readyState=="complete"){Ak.detachEvent(AW,arguments.callee);Ao();}});if(AF==top){(function(){if(AK){return ;}try{Ak.documentElement.doScroll("left");}catch(A){setTimeout(arguments.callee,0);return ;}Ao();})();}}if(AH.wk){(function(){if(AK){return ;}if(!/loaded|complete/.test(Ak.readyState)){setTimeout(arguments.callee,0);return ;}Ao();})();}Ab(Ao);}}();function Ao(){if(AK){return ;}try{var B=Ak.getElementsByTagName("body")[0].appendChild(AR("span"));B.parentNode.removeChild(B);}catch(A){return ;}AK=true;var D=Z.length;for(var C=0;C<D;C++){Z[C]();}}function AJ(A){if(AK){A();}else{Z[Z.length]=A;}}function Ab(A){if(typeof AF.addEventListener!=AQ){AF.addEventListener("load",A,false);}else{if(typeof Ak.addEventListener!=AQ){Ak.addEventListener("load",A,false);}else{if(typeof AF.attachEvent!=AQ){Al(AF,"onload",A);}else{if(typeof AF.onload=="function"){var B=AF.onload;AF.onload=function(){B();A();};}else{AF.onload=A;}}}}}function Am(){if(AA){Y();}else{AM();}}function Y(){var D=Ak.getElementsByTagName("body")[0];var B=AR(Ac);B.setAttribute("type",Ad);var A=D.appendChild(B);if(A){var C=0;(function(){if(typeof A.GetVariable!=AQ){var E=A.GetVariable("$version");if(E){E=E.split(" ")[1].split(",");AH.pv=[parseInt(E[0],10),parseInt(E[1],10),parseInt(E[2],10)];}}else{if(C<10){C++;setTimeout(arguments.callee,10);return ;}}D.removeChild(B);A=null;AM();})();}else{AM();}}function AM(){var G=Af.length;if(G>0){for(var H=0;H<G;H++){var C=Af[H].id;var L=Af[H].callbackFn;var A={success:false,id:C};if(AH.pv[0]>0){var I=Ar(C);if(I){if(AO(Af[H].swfVersion)&&!(AH.wk&&AH.wk<312)){AX(C,true);if(L){A.success=true;A.ref=AU(C);L(A);}}else{if(Af[H].expressInstall&&AT()){var E={};E.data=Af[H].expressInstall;E.width=I.getAttribute("width")||"0";E.height=I.getAttribute("height")||"0";if(I.getAttribute("class")){E.styleclass=I.getAttribute("class");}if(I.getAttribute("align")){E.align=I.getAttribute("align");}var F={};var D=I.getElementsByTagName("param");var K=D.length;for(var J=0;J<K;J++){if(D[J].getAttribute("name").toLowerCase()!="movie"){F[D[J].getAttribute("name")]=D[J].getAttribute("value");}}AE(E,F,C,L);}else{Ae(I);if(L){L(A);}}}}}else{AX(C,true);if(L){var B=AU(C);if(B&&typeof B.SetVariable!=AQ){A.success=true;A.ref=B;}L(A);}}}}}function AU(B){var D=null;var C=Ar(B);if(C&&C.nodeName=="OBJECT"){if(typeof C.SetVariable!=AQ){D=C;}else{var A=C.getElementsByTagName(Ac)[0];if(A){D=A;}}}return D;}function AT(){return !At&&AO("6.0.65")&&(AH.win||AH.mac)&&!(AH.wk&&AH.wk<312);}function AE(F,D,H,E){At=true;AP=E||null;AS={success:false,id:H};var A=Ar(H);if(A){if(A.nodeName=="OBJECT"){Ai=An(A);AD=null;}else{Ai=A;AD=H;}F.id=AC;if(typeof F.width==AQ||(!/%$/.test(F.width)&&parseInt(F.width,10)<310)){F.width="310";}if(typeof F.height==AQ||(!/%$/.test(F.height)&&parseInt(F.height,10)<137)){F.height="137";}Ak.title=Ak.title.slice(0,47)+" - Flash Player Installation";var B=AH.ie&&AH.win?"ActiveX":"PlugIn",C="MMredirectURL="+AF.location.toString().replace(/&/g,"%26")+"&MMplayerType="+B+"&MMdoctitle="+Ak.title;if(typeof D.flashvars!=AQ){D.flashvars+="&"+C;}else{D.flashvars=C;}if(AH.ie&&AH.win&&A.readyState!=4){var G=AR("div");H+="SWFObjectNew";G.setAttribute("id",H);A.parentNode.insertBefore(G,A);A.style.display="none";(function(){if(A.readyState==4){A.parentNode.removeChild(A);}else{setTimeout(arguments.callee,10);}})();}AZ(F,D,H);}}function Ae(A){if(AH.ie&&AH.win&&A.readyState!=4){var B=AR("div");A.parentNode.insertBefore(B,A);B.parentNode.replaceChild(An(A),B);A.style.display="none";(function(){if(A.readyState==4){A.parentNode.removeChild(A);}else{setTimeout(arguments.callee,10);}})();}else{A.parentNode.replaceChild(An(A),A);}}function An(B){var D=AR("div");if(AH.win&&AH.ie){D.innerHTML=B.innerHTML;}else{var E=B.getElementsByTagName(Ac)[0];if(E){var A=E.childNodes;if(A){var F=A.length;for(var C=0;C<F;C++){if(!(A[C].nodeType==1&&A[C].nodeName=="PARAM")&&!(A[C].nodeType==8)){D.appendChild(A[C].cloneNode(true));}}}}}return D;}function AZ(E,G,C){var D,A=Ar(C);if(AH.wk&&AH.wk<312){return D;}if(A){if(typeof E.id==AQ){E.id=C;}if(AH.ie&&AH.win){var F="";for(var I in E){if(E[I]!=Object.prototype[I]){if(I.toLowerCase()=="data"){G.movie=E[I];}else{if(I.toLowerCase()=="styleclass"){F+=' class="'+E[I]+'"';}else{if(I.toLowerCase()!="classid"){F+=" "+I+'="'+E[I]+'"';}}}}}var H="";for(var J in G){if(G[J]!=Object.prototype[J]){H+='<param name="'+J+'" value="'+G[J]+'" />';}}A.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+F+">"+H+"</object>";AG[AG.length]=E.id;D=Ar(E.id);}else{var B=AR(Ac);B.setAttribute("type",Ad);for(var K in E){if(E[K]!=Object.prototype[K]){if(K.toLowerCase()=="styleclass"){B.setAttribute("class",E[K]);}else{if(K.toLowerCase()!="classid"){B.setAttribute(K,E[K]);}}}}for(var L in G){if(G[L]!=Object.prototype[L]&&L.toLowerCase()!="movie"){Ap(B,L,G[L]);}}A.parentNode.replaceChild(B,A);D=B;}}return D;}function Ap(B,D,C){var A=AR("param");A.setAttribute("name",D);A.setAttribute("value",C);B.appendChild(A);}function AV(A){var B=Ar(A);if(B&&B.nodeName=="OBJECT"){if(AH.ie&&AH.win){B.style.display="none";(function(){if(B.readyState==4){As(A);}else{setTimeout(arguments.callee,10);}})();}else{B.parentNode.removeChild(B);}}}function As(A){var B=Ar(A);if(B){for(var C in B){if(typeof B[C]=="function"){B[C]=null;}}B.parentNode.removeChild(B);}}function Ar(A){var C=null;try{C=Ak.getElementById(A);}catch(B){}return C;}function AR(A){return Ak.createElement(A);}function Al(A,C,B){A.attachEvent(C,B);AL[AL.length]=[A,C,B];}function AO(A){var B=AH.pv,C=A.split(".");C[0]=parseInt(C[0],10);C[1]=parseInt(C[1],10)||0;C[2]=parseInt(C[2],10)||0;return(B[0]>C[0]||(B[0]==C[0]&&B[1]>C[1])||(B[0]==C[0]&&B[1]==C[1]&&B[2]>=C[2]))?true:false;}function AY(B,F,A,C){if(AH.ie&&AH.mac){return ;}var E=Ak.getElementsByTagName("head")[0];if(!E){return ;}var G=(A&&typeof A=="string")?A:"screen";if(C){Ag=null;AN=null;}if(!Ag||AN!=G){var D=AR("style");D.setAttribute("type","text/css");D.setAttribute("media",G);Ag=E.appendChild(D);if(AH.ie&&AH.win&&typeof Ak.styleSheets!=AQ&&Ak.styleSheets.length>0){Ag=Ak.styleSheets[Ak.styleSheets.length-1];}AN=G;}if(AH.ie&&AH.win){if(Ag&&typeof Ag.addRule==Ac){Ag.addRule(B,F);}}else{if(Ag&&typeof Ak.createTextNode!=AQ){Ag.appendChild(Ak.createTextNode(B+" {"+F+"}"));}}}function AX(A,C){if(!Ah){return ;}var B=C?"visible":"hidden";if(AK&&Ar(A)){Ar(A).style.visibility=B;}else{AY("#"+A,"visibility:"+B);
}}function AI(B){var A=/[\\\"<>\.;]/;var C=A.exec(B)!=null;return C&&typeof encodeURIComponent!=AQ?encodeURIComponent(B):B;}var Aq=function(){if(AH.ie&&AH.win){window.attachEvent("onunload",function(){var A=AL.length;for(var B=0;B<A;B++){AL[B][0].detachEvent(AL[B][1],AL[B][2]);}var D=AG.length;for(var C=0;C<D;C++){AV(AG[C]);}for(var E in AH){AH[E]=null;}AH=null;for(var F in swfobject){swfobject[F]=null;}swfobject=null;});}}();return{registerObject:function(A,E,C,B){if(AH.w3&&A&&E){var D={};D.id=A;D.swfVersion=E;D.expressInstall=C;D.callbackFn=B;Af[Af.length]=D;AX(A,false);}else{if(B){B({success:false,id:A});}}},getObjectById:function(A){if(AH.w3){return AU(A);}},embedSWF:function(K,E,H,F,C,A,B,I,G,J){var D={success:false,id:E};if(AH.w3&&!(AH.wk&&AH.wk<312)&&K&&E&&H&&F&&C){AX(E,false);AJ(function(){H+="";F+="";var Q={};if(G&&typeof G===Ac){for(var O in G){Q[O]=G[O];}}Q.data=K;Q.width=H;Q.height=F;var N={};if(I&&typeof I===Ac){for(var P in I){N[P]=I[P];}}if(B&&typeof B===Ac){for(var L in B){if(typeof N.flashvars!=AQ){N.flashvars+="&"+L+"="+B[L];}else{N.flashvars=L+"="+B[L];}}}if(AO(C)){var M=AZ(Q,N,E);if(Q.id==E){AX(E,true);}D.success=true;D.ref=M;}else{if(A&&AT()){Q.data=A;AE(Q,N,E,J);return ;}else{AX(E,true);}}if(J){J(D);}});}else{if(J){J(D);}}},switchOffAutoHideShow:function(){Ah=false;},ua:AH,getFlashPlayerVersion:function(){return{major:AH.pv[0],minor:AH.pv[1],release:AH.pv[2]};},hasFlashPlayerVersion:AO,createSWF:function(A,B,C){if(AH.w3){return AZ(A,B,C);}else{return undefined;}},showExpressInstall:function(B,A,D,C){if(AH.w3&&AT()){AE(B,A,D,C);}},removeSWF:function(A){if(AH.w3){AV(A);}},createCSS:function(B,A,C,D){if(AH.w3){AY(B,A,C,D);}},addDomLoadEvent:AJ,addLoadEvent:Ab,getQueryParamValue:function(B){var A=Ak.location.search||Ak.location.hash;if(A){if(/\?/.test(A)){A=A.split("?")[1];}if(B==null){return AI(A);}var C=A.split("&");for(var D=0;D<C.length;D++){if(C[D].substring(0,C[D].indexOf("="))==B){return AI(C[D].substring((C[D].indexOf("=")+1)));}}}return"";},expressInstallCallback:function(){if(At){var A=Ar(AC);if(A&&Ai){A.parentNode.replaceChild(Ai,A);if(AD){AX(AD,true);if(AH.ie&&AH.win){Ai.style.display="block";}}if(AP){AP(AS);}}At=false;}}};}();(function(){var O={},N=this,M=N.async;typeof module!="undefined"&&module.exports?module.exports=O:N.async=O,O.noConflict=function(){return N.async=M,O;};var L=function(Q,P){if(Q.forEach){return Q.forEach(P);}for(var R=0;R<Q.length;R+=1){P(Q[R],R,Q);}},K=function(Q,P){if(Q.map){return Q.map(P);}var R=[];return L(Q,function(S,U,T){R.push(P(S,U,T));}),R;},J=function(Q,P,R){return Q.reduce?Q.reduce(P,R):(L(Q,function(S,U,T){R=P(R,S,U,T);}),R);},I=function(Q){if(Object.keys){return Object.keys(Q);}var P=[];for(var R in Q){Q.hasOwnProperty(R)&&P.push(R);}return P;};typeof process=="undefined"||!process.nextTick?O.nextTick=function(P){setTimeout(P,0);}:O.nextTick=process.nextTick,O.forEach=function(Q,P,S){S=S||function(){};if(!Q.length){return S();}var R=0;L(Q,function(T){P(T,function(U){U?(S(U),S=function(){}):(R+=1,R===Q.length&&S(null));});});},O.forEachSeries=function(Q,P,T){T=T||function(){};if(!Q.length){return T();}var S=0,R=function(){P(Q[S],function(U){U?(T(U),T=function(){}):(S+=1,S===Q.length?T(null):R());});};R();},O.forEachLimit=function(Q,P,W,V){V=V||function(){};if(!Q.length||P<=0){return V();}var U=0,T=0,S=0;(function R(){if(U===Q.length){return V();}while(S<P&&T<Q.length){T+=1,S+=1,W(Q[T-1],function(X){X?(V(X),V=function(){}):(U+=1,S-=1,U===Q.length?V():R());});}})();};var H=function(P){return function(){var Q=Array.prototype.slice.call(arguments);return P.apply(null,[O.forEach].concat(Q));};},G=function(P){return function(){var Q=Array.prototype.slice.call(arguments);return P.apply(null,[O.forEachSeries].concat(Q));};},F=function(Q,P,T,S){var R=[];P=K(P,function(V,U){return{index:U,value:V};}),Q(P,function(V,U){T(V.value,function(X,W){R[V.index]=W,U(X);});},function(U){S(U,R);});};O.map=H(F),O.mapSeries=G(F),O.reduce=function(P,S,R,Q){O.forEachSeries(P,function(U,T){R(S,U,function(V,W){S=W,T(V);});},function(T){Q(T,S);});},O.inject=O.reduce,O.foldl=O.reduce,O.reduceRight=function(P,T,S,R){var Q=K(P,function(U){return U;}).reverse();O.reduce(Q,T,S,R);},O.foldr=O.reduceRight;var E=function(Q,P,T,S){var R=[];P=K(P,function(V,U){return{index:U,value:V};}),Q(P,function(V,U){T(V.value,function(W){W&&R.push(V),U();});},function(U){S(K(R.sort(function(W,V){return W.index-V.index;}),function(V){return V.value;}));});};O.filter=H(E),O.filterSeries=G(E),O.select=O.filter,O.selectSeries=O.filterSeries;var D=function(Q,P,T,S){var R=[];P=K(P,function(V,U){return{index:U,value:V};}),Q(P,function(V,U){T(V.value,function(W){W||R.push(V),U();});},function(U){S(K(R.sort(function(W,V){return W.index-V.index;}),function(V){return V.value;}));});};O.reject=H(D),O.rejectSeries=G(D);var C=function(Q,P,S,R){Q(P,function(U,T){S(U,function(V){V?(R(U),R=function(){}):T();});},function(T){R();});};O.detect=H(C),O.detectSeries=G(C),O.some=function(P,R,Q){O.forEach(P,function(T,S){R(T,function(U){U&&(Q(!0),Q=function(){}),S();});},function(S){Q(!1);});},O.any=O.some,O.every=function(P,R,Q){O.forEach(P,function(T,S){R(T,function(U){U||(Q(!1),Q=function(){}),S();});},function(S){Q(!0);});},O.all=O.every,O.sortBy=function(P,R,Q){O.map(P,function(T,S){R(T,function(V,U){V?S(V):S(null,{value:T,criteria:U});});},function(T,S){if(T){return Q(T);}var U=function(W,V){var Y=W.criteria,X=V.criteria;return Y<X?-1:Y>X?1:0;};Q(null,K(S.sort(U),function(V){return V.value;}));});},O.auto=function(Q,P){P=P||function(){};var W=I(Q);if(!W.length){return P(null);}var V={},U=[],T=function(X){U.unshift(X);},S=function(Y){for(var X=0;X<U.length;X+=1){if(U[X]===Y){U.splice(X,1);return ;}}},R=function(){L(U.slice(0),function(X){X();});};T(function(){I(V).length===W.length&&(P(null,V),P=function(){});}),L(W,function(e){var b=Q[e] instanceof Function?[Q[e]]:Q[e],a=function(c){if(c){P(c),P=function(){};}else{var f=Array.prototype.slice.call(arguments,1);f.length<=1&&(f=f[0]),V[e]=f,R();}},Z=b.slice(0,Math.abs(b.length-1))||[],Y=function(){return J(Z,function(d,c){return d&&V.hasOwnProperty(c);},!0)&&!V.hasOwnProperty(e);};if(Y()){b[b.length-1](a,V);}else{var X=function(){Y()&&(S(X),b[b.length-1](a,V));};T(X);}});},O.waterfall=function(P,R){R=R||function(){};if(!P.length){return R();}var Q=function(S){return function(V){if(V){R(V),R=function(){};}else{var U=Array.prototype.slice.call(arguments,1),T=S.next();T?U.push(Q(T)):U.push(R),O.nextTick(function(){S.apply(null,U);});}};};Q(O.iterator(P))();},O.parallel=function(P,R){R=R||function(){};if(P.constructor===Array){O.map(P,function(T,S){T&&T(function(U){var V=Array.prototype.slice.call(arguments,1);V.length<=1&&(V=V[0]),S.call(null,U,V);});},R);}else{var Q={};O.forEach(I(P),function(S,T){P[S](function(U){var V=Array.prototype.slice.call(arguments,1);V.length<=1&&(V=V[0]),Q[S]=V,T(U);});},function(S){R(S,Q);});}},O.series=function(P,R){R=R||function(){};if(P.constructor===Array){O.mapSeries(P,function(T,S){T&&T(function(U){var V=Array.prototype.slice.call(arguments,1);V.length<=1&&(V=V[0]),S.call(null,U,V);});},R);}else{var Q={};O.forEachSeries(I(P),function(S,T){P[S](function(U){var V=Array.prototype.slice.call(arguments,1);V.length<=1&&(V=V[0]),Q[S]=V,T(U);});},function(S){R(S,Q);});}},O.iterator=function(Q){var P=function(S){var R=function(){return Q.length&&Q[S].apply(null,arguments),R.next();};return R.next=function(){return S<Q.length-1?P(S+1):null;},R;};return P(0);},O.apply=function(Q){var P=Array.prototype.slice.call(arguments,1);return function(){return Q.apply(null,P.concat(Array.prototype.slice.call(arguments)));};};var B=function(Q,P,T,S){var R=[];Q(P,function(V,U){T(V,function(W,X){R=R.concat(X||[]),U(W);});},function(U){S(U,R);});};O.concat=H(B),O.concatSeries=G(B),O.whilst=function(P,R,Q){P()?R(function(S){if(S){return Q(S);}O.whilst(P,R,Q);}):Q();},O.until=function(P,R,Q){P()?Q():R(function(S){if(S){return Q(S);}O.until(P,R,Q);});},O.queue=function(P,S){var R=0,Q={tasks:[],concurrency:S,saturated:null,empty:null,drain:null,push:function(T,U){T.constructor!==Array&&(T=[T]),L(T,function(V){Q.tasks.push({data:V,callback:typeof U=="function"?U:null}),Q.saturated&&Q.tasks.length==S&&Q.saturated(),O.nextTick(Q.process);
});},process:function(){if(R<Q.concurrency&&Q.tasks.length){var T=Q.tasks.shift();Q.empty&&Q.tasks.length==0&&Q.empty(),R+=1,P(T.data,function(){R-=1,T.callback&&T.callback.apply(T,arguments),Q.drain&&Q.tasks.length+R==0&&Q.drain(),Q.process();});}},length:function(){return Q.tasks.length;},running:function(){return R;}};return Q;};var A=function(P){return function(Q){var R=Array.prototype.slice.call(arguments,1);Q.apply(null,R.concat([function(S){var T=Array.prototype.slice.call(arguments,1);typeof console!="undefined"&&(S?console.error&&console.error(S):console[P]&&L(T,function(U){console[P](U);}));}]));};};O.log=A("log"),O.dir=A("dir"),O.memoize=function(Q,P){var T={},S={};P=P||function(U){return U;};var R=function(){var W=Array.prototype.slice.call(arguments),V=W.pop(),U=P.apply(null,W);U in T?V.apply(null,T[U]):U in S?S[U].push(V):(S[U]=[V],Q.apply(null,W.concat([function(){T[U]=arguments;var Y=S[U];delete S[U];for(var X=0,Z=Y.length;X<Z;X++){Y[X].apply(null,arguments);}}])));};return R.unmemoized=Q,R;},O.unmemoize=function(P){return function(){return(P.unmemoized||P).apply(null,arguments);};};})();(function(B){var A=/([^&=]+)=?([^&]*)/g;var D=/\+/g;var C=function(E){return decodeURIComponent(E.replace(D," "));};B.parseParams=function(G){var I={},H;while(H=A.exec(G)){var F=C(H[1]),E=C(H[2]);if(F.substring(F.length-2)==="[]"){F=F.substring(0,F.length-2);(I[F]||(I[F]=[])).push(E);}else{I[F]=E;}}return I;};B.substitute=function(F,E){return F.replace(/\{(.+?)\}/g,function(H,G){return G in E?E[G]:H;});};})(jQuery);var TWP=window.TWP||{};(function(A){TWP.Overlay=function(G,E){var C=this;var D=this.config={top:"center",left:"center",fixed:false,speed:"fast",showOverlay:true,loadSpeed:100,overlayOpacity:0.7,overlayColor:"black"};var B=function(){A.extend(D,E);if(!G){G=A("<div/>").css("width",100).css("height",100);}if(!C.overlay){C.id="overlay_"+new Date().getTime();C.contentWrapperId="wrapper_"+C.id;var H=A("<div/>",{id:C.id}).addClass("simple-overlay modal-wrapper");H.append(A("<div/>",{id:C.contentWrapperId}).addClass("content-wrapper photo-display"));A("body").prepend(H);C.overlay=H.overlay({mask:{color:D.overlayColor,loadSpeed:D.loadSpeed,opacity:D.overlayOpacity,zIndex:55554},top:D.top,left:D.left,onBeforeLoad:function(I){C.setBody(G);if(D.onBeforeLoad){D.onBeforeLoad(I);}},onLoad:D.onLoad?D.onLoad:function(){},onBeforeClose:D.onBeforeClose?D.onBeforeClose:function(){},onClose:D.onClose?D.onClose:function(){},load:D.showOverlay,fixed:D.fixed,speed:D.speed});TWP.currentOverlay=C.overlay;F();}else{C.show();}};var F=function(){if(D.callback){D.callback(C);}};this.show=function(){A("#"+C.id).overlay().load();};this.destroy=function(){if(C.overlay){var H=A("#"+C.id);H.overlay().close();H.remove();C.overlay=null;}};this.close=function(){var H=A("#"+C.id).overlay();if(H.isOpened()){H.close();}};this.setBody=function(I){var H=A("#"+this.contentWrapperId);H.html(typeof I=="string"?I:I[0].outerHTML?I[0].outerHTML:I[0]);};this.getBody=function(){return A("#"+this.contentWrapperId);};B.apply(this);return C;};}(jQuery));(function(A){TWP.Multimedia={elems:{},init:function(B){this.cacheElems();this.events(this);},cacheElems:function(){this.elems.$content=A("#content");this.elems.$rateLinks=A(".rate");this.elems.$sendEmailLink=A(".modal_email");this.elems.$modalLink=A("#multimedia-leaf-page .modal");this.elems.$modalClose=A("#modal_close");this.elems.$emailLinks=A(".email a");this.elems.$modalContent=A("#modal_content");this.elems.$modalBar=A("#modal_bar");},events:function(E){var F=this.elems.$modalLink;var B=this.elems.$rateLinks;if(F.length>0){var D=TWP.Objs.modal;var C=this.elems.$modalClose;F.click(function(G){G.preventDefault();D.showModal({content:".flipper-wrap",clone:true,skin:"default",callback:function(){C.css("display","none");var J=A("#modal_content");A(".flipper-wrap",J).flipper();A(".flipper-caption",J).insertAfter(A("#modal_content .thumbs"));A(".caption",J).parent().remove();A("#modal_content .modal").click(function(K){K.preventDefault();D.closeModal();});A("#modal_content .modal").addClass("blue").addClass("small").removeClass("gray");A("#modal_content .flipper-wrap").removeClass("mini").removeClass("border-bottom");var H=A("#modal_content .flipper-inner img").attr("fullscreen");var I=A("#modal_content .flipper-inner img");if(I.length>0){I.attr("src",H).removeClass("image610");}A("#modal_content ul.thumbs li a").each(function(){var L=A(this);var K=L.attr("fullscreen");L.attr("href",K);});}});});}B.click(function(J){J.preventDefault();$target=A(J.target);var I;var H=$target.attr("loidEx");var G=$target.attr("pURL");$target.hasClass("like")?I="1":I="2";E.updateRate(I,H,G);});},updateRate:function(G,D,F){var B="Rating";var C=F+"?counter="+escape(B)+"&loid="+escape(D);data=G;var E=PortalCommons.postRemoteHTML(C,data);if(E!=0){alert("Error #"+E);}this.elems.$rateLinks.addClass("deactivated");this.elems.$rateLinks.unbind("click");}};A(document).ready(function(){TWP.Multimedia.init(siteContext);});})(jQuery);TWP=window.TWP||{};TWP.Social=TWP.Social||{};(function(A){TWP.Social.ShareBox=function(C,B){var K=C,J=K.hasClass("bottom")?false:true,N={"facebook":{name:"Facebook",url:"http://www.facebook.com/sharer.php?u={shareURL}&title={shareTitle}"},"digg":{name:"Digg",url:"http://digg.com/submit?phase=2&url={shareURL}&title={shareTitle}"},"stumble-upon":{name:"Stumble Upon",url:"http://www.stumbleupon.com/submit?url={shareURL}&title{shareTitle}"},"email":{name:"Email",url:"mailto:?subject=The Washington Post: {shareURL}&body={shareTitle}%0A{shareURL}",emailURL:"{emailURL}"},"rss":{name:"RSS",url:"{rssURL}"},"twitter":{name:"Twitter",url:"http://twitter.com/home?status={shareURL}&title={shareTitle}"},"delicious":{name:"Delicious",url:"http://del.icio.us/post?v=4&noui&jump=close&url={shareURL}&title={shareTitle}"},"yahoo-buzz":{name:"Yahoo Buzz",url:"http://buzz.yahoo.com/submit/?submitUrl={shareURL}&title={shareTitle}"},"linkedin":{name:"LinkedIn",url:"http://www.linkedin.com/shareArticle?mini=true&url={shareURL}&title={shareTitle}"}},I=this.shareBox=A('<div class="share-box"/>').append(A('<div class="left odd"/>')).append(A('<div class="left even"/>')).append(A('<div class="clear"/>')),O=A(I).find(".odd"),E=I.find(".even"),H=0;var P=function(){if(B){K.addClass("click-only");}I.css("display","none");A("body").append(I);L();if(!K.hasClass("click-only")){K.bind("mouseenter",M);}K.unbind("click");K.bind("click",M);K.bind("mouseleave",D);I.bind("mouseleave",D);I.bind("mouseenter",M);};this.addNetwork=function(R,Q,S){N[R]={url:S,name:Q};L();};var L=this.updateLinks=function(){var Q=K.attr("href"),X=K.attr("title"),R=K.attr("emailurl"),W=K.attr("rss");var Y=[];if(K.attr("rel").toLowerCase().match("all")){for(var T in N){if(T=="rss"){if(W){Y.push(T);}}else{Y.push(T);}}}else{Y=K.attr("rel").split(",");}E.html("");O.html("");for(var V in Y){T=Y[V];if(N[T]){var S=N[T];var U=V%2?E:O;S.el=A('<a class="'+T+' icon share"/>',{target:"_blank"});S.el.attr("href",A.substitute((R&&T=="email")?S.emailURL:S.url,{shareURL:escape(Q),shareTitle:X,emailURL:R,rssURL:W}));S.el.text(S.name);U.append(S.el);if(R&&T=="email"){S.el.addClass("iframe-overlay").attr("config","width=850&height=800");}}}};var M=this.show=function(Q){if(Q){Q.preventDefault();}clearInterval(H);L();F();I.css("display","block");};var D=function(Q){if(Q){Q.preventDefault();}clearInterval(H);H=setTimeout(G,200);};var G=this.hide=function(){I.css("display","none");};var F=this.position=function(){var R=I.css("display");I.css({display:"block"});var Q=K.offset();I.offset({left:Q.left,top:Q.top+(J?(-parseInt(I.css("height"))-2):(parseInt(K.css("height"))+2))});I.css({display:R});};P();};}(jQuery));TWP=window.TWP||{};TWP.OmniPlayerCallBacks=TWP.OmniPlayerCallBacks||{};TWP.Audio=TWP.Audio||{};(function(A){TWP.Audio.OmniAudio=function(D){var J="swfobject_"+new Date().getTime();var K=false;var R=this,Z=D.find(".player-container"),M=D.find(".play-pause.button"),S={track:D.find(".progress-bar .click-track"),portion:D.find(".progress-bar .portion"),progress:D.find(".progress-bar .progress"),duration:D.find(".progress-bar .duration")},Q={muteToggle:D.find(".mute-toggle"),track:D.find(".volume-controls .click-track"),portion:D.find(".volume-controls .portion")},C="omni_audio_"+new Date().getTime(),I=this.omniPlayer=null,d=this.config={omniPlayerURL:TWP.eidosBase+"/rw/sites/twpweb/swf/OmniPlayer.swf",flashConfig:{version:"9.0",fixedAttributes:{wmode:"opaque",allowScriptAccess:"always",allowFullScreen:"true",allowNetworking:"all"},flashVars:{mp3URL:D.find("input[name=audioURL]")?D.find("input[name=audioURL]").get("value"):null,onLoad:"TWP.OmniPlayerCallBacks."+C+".onLoad"}}},g=false,T=false,V=0.5,e=0.5,f=0,B=0;
var U=this.init=function(h){if(!K){if(!navigator.userAgent.match(/(iPod|iPhone|iPad)/)){TWP=TWP||{};TWP.OmniplayerCallBack=TWP.OmniplayerCallBack||{};TWP.OmniPlayerCallBacks[C]={onLoad:F,onProgress:H};A("<div/>",{id:J}).appendTo(Z.empty());swfobject.embedSWF(d.omniPlayerURL,J,"100%","100%",d.flashConfig.version,null,d.flashConfig.flashVars,d.flashConfig.fixedAttributes,null,function(i){R.omniPlayer=I=i.ref;if(h){h();}var j=setInterval(function(){if(R.omniPlayer.pauseVideo){R.omniPlayer.pauseVideo();if(TWP.Data.prerollDone){clearInterval(j);R.omniPlayer.playVideo();}}},100);});}Z.css("opacity",0);M.on("click",c);S.track.on("mousedown",b);S.track.on("mouseup",L);S.track.on("mouseleave",L);S.track.on("mousemove",P);Q.muteToggle.on("click",a);Q.track.on("mousedown",O);Q.track.on("mouseup",E);Q.track.on("mouseleave",E);Q.track.on("mousemove",N);K=true;}};var F=function(){setInterval(H,100);V=I.getStatus().volume;M.toggleClass("playing");W();};var c=this.pauseToggle=function(){var h=I.getStatus().state;M.toggleClass("playing");if(h=="playing"){I.pauseVideo();}else{I.playVideo();}};var H=function(){var h=I.getStatus();if(h.state=="playing"){f=h.position;B=h.duration;Y();A(R).trigger("progress",{position:f,duration:B});}};var b=function(){g=true;};var L=function(h){P(h);g=false;};var P=function(i){if(g){var h=i.pageX-S.track.offset().left;f=(h/parseInt(S.track.css("width")))*B;I.seek(f);}};this.seek=function(i){var h=this;if(typeof I.seek!="function"){setTimeout(function(){h.seek(i);},250);}else{I.seek(i);f=i;Y();}};var Y=function(){S.progress.html(X(f));S.duration.html(X(B));S.portion.css("width",(f/B)*parseInt(S.track.css("width")));};var a=function(){var h=I.getStatus().volume;if(h==0){V=e;}else{e=V;V=0;}I.setVolume(V);W();};var O=function(){T=true;};var E=function(h){N(h);T=false;};var N=function(i){if(T){var h=i.pageX-Q.track.offset().left;V=(h/parseInt(Q.track.css("width")));V=V>1?1:V;I.setVolume(V);W();}};var W=function(){Q.portion.css("width",V*parseInt(Q.track.css("width")));};var X=function G(i){var h=Math.floor(i/60);var j=Math.floor(i%60);if(h<10){h="0"+h;}if(j<10){j="0"+j;}return h+":"+j;};if(d.flashConfig.flashVars.mp3URL){U.call(this);}};})(jQuery);TWP=window.TWP||{};TWP.Photo=TWP.Photo||{};TWP.Photo.PhotoSlick=function(D){var AD=function(Ak,Ah){var Aj=false;var Ai=async.queue(function(Al,An){if(!Aj){try{if(Al.args.length){Al.fn.apply(this,Al.args);}else{Al.fn.call(this,Al.args);}}catch(Am){console.warn(Am);}if(An){setTimeout(An,Al.timeout?Al.timeout:0);}}},Ah?Ah:1);this.stop=function(){Aj=true;if(Ai.tasks.length>0){Ai.tasks=[];}};this.run=function(Al){Aj=false;if(Al){$.each(Al,function(An,Am){Ai.push(Am);});}};this.add=function(Al){Ai.push(Al);};this.isRunning=function(){return Ai.length()>0;};this.run(Ak);};var T={fullscreen_LOADED:"fullscreenLoaded",standard_LOADED:"standardLoaded",THUMB_LOADED:"thumbLoaded"};var AL=function(Al,Ak){var Ap=this;var Aj=Ap.config={id:0,title:"",blurb:"",permaLinkURL:"",likeURL:"",buyURL:null,raiting:0,timeIndex:null,images:{thumbnail:{url:"",width:90,height:60},standard:{url:"",width:600,height:450},fullscreen:{url:"",width:900,height:675}},relatedLinks:[],credits:[{name:null,title:null,organization:null,credit:null}],dateConfig:{dateCreated:0,dateUpdate:0,datePublished:0}},An=this.fullscreen={el:$("<img/>"),loadedStatus:false,originalSize:{width:0,height:0}},Am=this.standard={el:$("<img/>"),loadedStatus:false,originalSize:{width:0,height:0}},Ah=this.thumb={el:$("<img/>"),loadedStatus:false,originalSize:{width:0,height:0}};var Ao=function(){Aj=$.extend(Aj,Al);Ai(Aj.images.fullscreen,An,T.fullscreen_LOADED);Ai(Aj.images.standard,Am,T.standard_LOADED);Ai(Aj.images.thumbnail,Ah,T.THUMB_LOADED);};var Ai=function(Ar,Aq,As){Aq.originalSize={width:Ar.width,height:Ar.height};Aq.el.css(Aq.originalSize);Aq.el.load(function(){Aq.el.addClass("loaded");Aq.loadedStatus=true;$(Ap).trigger(As);});};this.loadPhoto=function(Aq){switch(Aq){case"fullscreen":An.el.attr("src",Ak+Aj.images.fullscreen.url);break;case"standard":Am.el.attr("src",Ak+Aj.images.standard.url);break;case"thumb":Ah.el.attr("src",Ak+Aj.images.thumbnail.url);break;}};Ao.call(this);};var Y="unique_"+new Date().getTime();var AQ=this,AW=$(D),AY={thumbs:AW.find(".toolbar .thumbs"),autoPlay:AW.find(".toolbar .auto-play"),fullScreen:AW.find(".toolbar .full-screen"),credits:AW.find(".toolbar .credits"),share:AW.find(".toolbar .share"),like:AW.find(".toolbar .like"),permalink:AW.find(".toolbar .permalink"),buy:AW.find(".toolbar .buy"),email:AW.find(".toolbar .email")},K=AW.find(".toolbar.bottom"),AI=null,n=AW.find(".photo-display"),G=AW.find(".photo-display .photo-left"),Ag=AW.find(".photo-display .photo-right"),x=$(".photo-slide"),AT=AW.find(".counter-current"),I=AW.find(".slider-area"),X=AW.find(".slider"),d=AW.find(".slider .numbers"),AV=AW.find(".slider .numbers-slide"),c=[],F=AW.find(".slider-controls.left"),h=AW.find(".slider-controls.right"),Ac=AW.find(".credits-box"),AB=AW.find(".ad"),Ad=null,AP={headline:AW.find(".credits-box .title"),cutLine:AW.find(".credits-box .cut-line"),name:AW.find(".credits-box .name"),organization:AW.find(".credits-box .organization"),credit:AW.find(".credits-box .credit"),slash:AW.find(".credits-box .slash")},j=AW.find(".related-links"),AG=$('<div class="p-s-thumbnail-layer"/>'),AO=null,w=AW.find(".play-controls-area"),AS=AW.find(".autoplay-controls"),AK=AW.find(".autoplay-controls .seconds"),AM={playPause:AW.find(".autoplay-controls .play-pause"),stop:AW.find(".autoplay-controls .stop"),plus:AW.find(".autoplay-controls .plus"),minus:AW.find(".autoplay-controls .minus")},U=$('<div class="video-ad-box"/>'),A=this.config={omniPlayerURL:TWP.eidosBase+"/rw/sites/twpweb/swf/OmniPlayer.swf",flashConfig:{version:9,fixedAttributes:{wmode:"opaque",allowScriptAccess:"always",allowFullScreen:"true",allowNetworking:"all"},flashVars:{callBacks:'[{"event":"adComplete","callBack":"TWP.OmniPlayerCallBacks[\\"'+Y+'\\"].adComplete"}]',adOnly:"true"}}},g=null,Ab={fullscreenSWFURL:TWP.eidosBase+"/rw/sites/twpweb/swf/PhotoSlick.swf",flashConfig:{version:"9.0",fixedAttributes:A.flashConfig.fixedAttributes,flashVars:{buttonMode:"true",jsonURL:"",onLoad:"TWP.PhotoSlickCallBacks."+Y+".onLoad"}}},u=[],m={mediaServer:"",contextServer:""},l={section:"",tags:[],omnitureSection:""},L={playAds:true,playVideoAds:true,adZone:"",videoAdZone:"",adURL:"",adParameters:"",photosPerBigBoxAd:4,photosPerLeaderBoardAd:4},AA={audio:false,audioURL:"/.../foo.mp3",audioDuration:800000,title:"I'm a Gallery",blurb:"",relatedLinks:[],credits:[],dateConfig:[]},r=0,AE=0,Aa=0,Af=5,AR=new AD(),R=new AD(null,1),H=null,k=false,b=0,AX=null,S=false,AH=null,J=false,Z=parseInt(n.css("width"),10)*0.25;var AZ=function(){var Ah=photoGalleryAdConfig=function(Ai){$.cookie("photoJSONAdConfig",$.param(Ai),{path:"/",expires:new Date(new Date().getTime()+5*60*60*1000)});B();};$.ajax({url:"http://media.washingtonpost.com/wp-srv/ad/photo-ad-config.jsonp",dataType:"jsonp",async:false,jsonpCallback:"photoGalleryAdConfig"});};var B=function(Ak){var Ah=AW.find("form.adConfig");if(Ah){$.each(L,function(Ap,Aq){if(Ah[Ap]){L[Ap]=Ah[Ap].attr("value");}});}var Aj=$.cookie("photoJSONAdConfig");var Al=$.parseParams(Aj);if(Aj==null||(!Al&&!Ak)){AZ();return ;}else{L=Al;}Ac.animate({opacity:0},250);n.append(x);var Ao=$("input[name=jsonURL]"),An=$("input[name=jsonpURL]"),Ai=$("input[name=jsonpStaticURL]"),Am="";if(Ao){Am=Ao.attr("value");Ab.flashConfig.flashVars.jsonURL=Am;}if(Am.match(/\:\/\/+([^\/]+)/)&&Am.match(/\:\/\/+([^\/]+)/)[1]==window.location.host){$.ajax({url:Am,dataType:"json",success:t,error:function(Ap,Ar,Aq){console.error("Cannot load json!\n %s",Aq);}});}else{processTwpJson=i;if(Ai){$.ajax({url:Ai.attr("value"),dataType:"jsonp",async:false,jsonpCallback:"parseJSON"});}else{if(An){$.ajax({url:An.attr("value"),dataType:"jsonp",async:false,jsonpCallback:"parseJSON"});}else{console.error("No suitable input for data found.","error");}}}};var t=function(Ah){try{i(Ah);}catch(Ai){console.log("TARNATION! Invalid JSON! %s",Ai);
}};var i=function(Ai){n.find("img").remove();AV.find("li").remove();u=[];m=$.extend(m,Ai.serverConfig);Ai.adConfig.playAds=!L.playAds?false:Ai.adConfig.playAds;Ai.adConfig.playVideoAds=!L.playAds?false:Ai.adConfig.playVideoAds;L=$.extend(L,Ai.adConfig);l=$.extend(l,Ai.metaConfig);AA=$.extend(AA,Ai.contentConfig);var Ah=[];$.each(Ai.photos,function(Ak,Al){var Aj=new AL(Al.contentConfig,m.mediaServer);if(Aj.config.buyURL){Ah.push({"img":Aj.config.images.standard.url,"original_image_url":Aj.config.images.raw.url});}Aj.callbackItem={fn:p,args:Aj,timeout:100,autoContinue:false};x.append(Aj.standard.el);AV.append($("<li/>").append($("<a/>",{text:(Ak+1)})));z(Aj.standard);u.push(Aj);});TWP=TWP||{};TWP.Util=TWP.Util||{};TWP.Util.Fotomoto=TWP.Util.Fotomoto||{};if(Ah.length>0&&typeof TWP.Util.Fotomoto.checkinPhotos=="function"){TWP.Util.Fotomoto.checkinPhotos(Ah);}c=AV.find("li a");f();if(navigator.userAgent.match(/(iPod|iPhone|iPad)/)){U=null;AY.fullscreen.css("display","none");}};var f=function(){TWP.PhotoSlickCallBacks=TWP.PhotoSlickCallBacks||{};TWP.PhotoSlickDisplayStates=TWP.PhotoSlickDisplayStates||{};var Ai="photo_slick_"+new Date().getTime();TWP.PhotoSlickDisplayStates[Y]="normal";TWP.PhotoSlickCallBacks[Y]={onLoad:function(){g.addPlayerEvent("fullscreen","TWP.PhotoSlickCallBacks."+Y+".onFullScreen");g.addPlayerEvent("resize","TWP.PhotoSlickCallBacks."+Y+".onResize");},onResize:function(){var Aq=g.getStatus();if(Aq.stageDisplayState!="fullScreen"){if(TWP.PhotoSlickDisplayStates[Y]!=Aq.stageDisplayState){o(Aq.currentPhoto,true);}}TWP.PhotoSlickDisplayStates[Y]=Aq.stageDisplayState;if(H){H.pauseToggle();}if(Aq.autoPlay){Af=Aq.autoPlayDuration;if(w.css("height")<5){v();}}},onFullScreen:function(){if(!H){V();}}};AY.fullScreen.addClass("flash");$("<div/>",{id:Ai}).appendTo(AY.fullScreen);swfobject.embedSWF(Ab.fullscreenSWFURL,Ai,"100%","100%",Ab.flashConfig.version,null,Ab.flashConfig.flashVars,Ab.flashConfig.fixedAttributes,null,function(Aq){g=Aq.ref;});var Ao=1;var Ap=1/Ao;var Aj=function(){return TWP.StaticMethods.getCountingCookie("galleryPlays");};var Ak=function(){TWP.StaticMethods.incrementCountingCookie("galleryPlays",{expires:new Date("1/1/2022").toGMTString()});};var Am=function(){var Au=(navigator.cookieEnabled)?true:false;if(typeof navigator.cookieEnabled=="undefined"&&!Au){document.cookie="testcookie";Au="testcookie" in document.cookie?true:false;}var As=0;if(Au){var At="adsFlag=";var Aq=document.cookie.split(";");for(var Ar=0;Ar<Aq.length;Ar++){var Av=Aq[Ar];while(Av.charAt(0)==" "){Av=Av.substring(1,Av.length);}if(Av.indexOf(At)==0){As=Av.substring(At.length,Av.length);break;}}}return As;};var Al=!Am();Al=Al&&L.playVideoAds&&!navigator.userAgent.match(/(iPod|iPhone|iPad)/);var An=((Aj()%Ap)<1);var Ah=Al&&An;if(Ah||(!Ah&&!An)){Ak();}AC();};var AC=function(){AC=function(){};if(U){U.animate({opacity:0},function(){U.remove();U=null;AW.find(".ad").css("visibility","visible");});}M();placeAd2(commercialNode,"bigbox","AJAX","");if(window.location.hash.match(/photo=\d/)){r=parseInt(window.location.hash.match(/photo\=(\d+)/)[1],10)-1;}x.css("width",parseInt(n.css("width"),10)*u.length);AW.find(".counter-total").text(u.length);F.bind("click",q);h.bind("click",q);Ag.on("click",function(){o(r+1,true);});G.on("click",function(){o(r-1,true);});K.css({visibility:"visible",opacity:0});K.animate({opacity:1});if(navigator.userAgent.match(/(MSIE)/)){X.css({visibility:"visible"});}else{X.css({visibility:"visible",opacity:0});X.animate({opacity:1});}AY.thumbs.on("click",e);AQ.hash=location.hash;setInterval(function(){if(location.hash!=AQ.hash){AQ.hash=location.hash;if(location.hash){var Ah=location.hash.match(/photo\=(\d+)/)[1]-1;if(Ah!=r){o(Ah,true);}}}},100);$.each(c,function(Ah,Ai){$(Ai).bind("click",function(Aj){Aj.preventDefault();o(Ah,true);});});c.mouseover(N);c.mouseout(AF);$(document).keydown(function(Ah){switch(Ah.keyCode){case 39:o(r+1,true);break;case 37:o(r-1,true);break;}});AY.autoPlay.on("click",v);AM.playPause.on("click",C);AM.plus.on("click",function(){y(1);});AM.minus.on("click",function(){y(-1);});AM.stop.on("click",V);if(AA.isAudioGallery){AY.autoPlay.css("display","none");AS.css("display","none");k=true;w.animate({height:AS.css("height")},function(){H=new TWP.Audio.OmniAudio(AW.find(".audio-controls"));H.config.flashConfig.flashVars.mp3URL=m.mediaServer+AA.audioURL;$(H).bind("progress",AJ);H.init(function(){o(r,false,true);});});}else{o(r,false,true);}};var q=function(Aj){var Ai=$(Aj.currentTarget).hasClass("right"),Ah=$(Aj.target).hasClass("slider-scroll");if(Ah){Q(AE+(Ai?1:-1));}else{o(r+(Ai?1:-1),true);}};var v=function(){if(parseInt(w.css("height"),10)>5){V();}else{AS.css("opacity",0);w.animate({height:AS.css("height")},500,function(){C();AS.animate({opacity:1},500);});}};var C=function(){AM.playPause.toggleClass("playing");if(AM.playPause.hasClass("playing")){y(0);if(g){try{g.setParameters({autoPlay:true});}catch(Ah){}}}else{R.stop();if(g){try{g.setParameters({autoPlay:false});}catch(Ah){}}}};var y=function(Ah){Af+=Ah;Af=Af<1?1:Af;AK.text(Af);R.stop();for(var Ai=r+1;Ai<u.length;Ai++){R.add({fn:o,args:[Ai,true,false],timeout:Af*1000});}R.add({fn:function(){C();},args:[],timeout:Af*1000});if(AM.playPause.hasClass("playing")){R.run();}if(g){try{g.setAutoPlayDelay(Af);}catch(Aj){}}};var V=function(){if(AM.playPause.hasClass("playing")){C();}AS.animate({opacity:0},500,function(){w.animate({height:"1px"});});};var e=function(){AG.remove();AG.find("img").remove();AR.stop();$.each(u,function(Ak,Aj){var Ah=Aj.thumb.el.clone();var Ai=function(){var Am=AU(Aj.thumb);var An=20+Am.x;var Al=20+Am.y;Ah.css({marginTop:Al,marginBottom:Al,marginRight:An,marginLeft:An});};AG.append(Ah);Ai();if(!Aj.thumb.loadedStatus){$(Aj).on(T.THUMB_LOADED,Ai);Aj.loadPhoto("thumb");}});W();};var AN=function(){AO.destroy();Ae();};var W=function(){AO=TWP.Overlay(AG,{callback:function(Ah){Ah.getBody().find("img").each(function(Ai,Aj){$(Aj).click(function(){AN();o(Ai,true);});});$(".simple-overlay").css("background-color","#333");}});};var E=function(){var Ak=AW.find(".gal-end"),An=Ak.find(".gal-end-items").length==0;var Ai=Ak.find(".gal-end-next").attr("data-hasNext");Ai=Ai&&Ai=="true";if(Ai){AW.find(".gal-end-next").css("display","block");}else{if(An){AW.find(".gal-end").remove();var Al=$('<div class="gal-end"/>').appendTo(AW);Ak=Al.append($("<h4/>",{text:"Featured Photos and Videos"})).append($('<div class="gal-end-items"/>')).append($('<div class="clear"/>')).append($('<div class="gal-end-buttons"/>').append($('<a class="gal-end-button-back" href="#">Back to Previous Gallery</a>')).append($('<a class="gal-end-button-share click-only" rel="all" href="'+window.location.href+'">Share Previous Gallery</a>')).append($('<div class="clear"/>')));}}var Aj=Ak.find(".gal-end-items"),Aq='<div class="gal-end-item">'+'<a href="{link}"><img src="{image}" alt="{title}" /></a>'+'<p class="gal-end-title">'+'<a href="{link}">{title}</a>'+"</p>"+'<p class="gal-end-blurb">{blurb}</p>'+"</div>",Ap=null,As=0;var Au=function(){AW.css({overflow:"hidden",position:"relative"});Ak.css({position:"absolute",left:AW.css("width"),top:0});AW.append(Ak);Ak.find(".gal-end-button-back").on("click",function(Ax){Ax.preventDefault();At();});var Aw=Ak.find(".gal-end-next").attr("data-hasNext");Aw=Aw&&Aw=="true";var Av="http://translator.wpdigital.net/translate/embedGalleryData";if(Aw){$.ajax({url:Av+"?uuid="+AA.uuid,dataType:"jsonp",async:false,success:Ah,cache:true});}else{if(An){featuredPromo=Ao;$.ajax({url:"http://www.washingtonpost.com/wp-srv/photo/galleries/featuredpromo.jsonp",dataType:"jsonp",async:false,jsonpCallback:"featuredPromo"});}else{Ap=Ak;Am();}}};var Ah=function(A0){var Az='<script type="text/javascript" src="http://translator.wpdigital.net/translate/embedGallery?uuid=[UUID]" id="wp_eg_[UUID]"><\/script>';Ak.find(".gal-end-current-title").html(A0.title);Ak.find(".gal-end-next-title").html(A0.nextTitle).click(function(){document.location.href=A0.nextLink;});Ak.find(".gal-end-next-desc").html(A0.nextDesc);
Ak.find(".gal-end-current-image img").attr("src",A0.promoImages[3].url);var Aw=114/172;var Ax=A0.promoImages[3].w/A0.promoImages[3].h;if(Ax>=Aw){Ak.find(".gal-end-current-image img").attr("width",172);}else{Ak.find(".gal-end-current-image img").attr("height",114);var Ay=(114/A0.promoImages[3].h)*A0.promoImages[3].w;var Av=-1*Math.floor((Ay-172)/2);Ak.find(".gal-end-current-image img").css("margin-left",Av+"px");}Ak.find(".gal-end-next-image img").attr("src",A0.nextImages[5].url).click(function(){document.location.href=A0.nextLink;});Aw=276/460;Ax=A0.nextImages[5].w/A0.nextImages[5].h;if(Ax>=Aw){Ak.find(".gal-end-next-image img").attr("width",460);}else{Ak.find(".gal-end-next-image img").attr("height",276);var Ay=(114/A0.nextImages[5].h)*A0.nextImages[5].w;var Av=-1*Math.floor((Ay-460)/2);Ak.find(".gal-end-next-image img").css("margin-left",Av+"px");}Ak.find(".gal-end-next-arrow").click(function(){document.location.href=A0.nextLink;});Ak.find(".gal-end-current-back").click(At);Ak.find(".gal-end-current-embed").val(Az.replace("[UUID]",AA.uuid).replace("[UUID]",AA.uuid));Ak.css("height","660px");Ap=Ak;Am();};var Ao=function(Av){var Aw=0;$.each(Av,function(Ax,Ay){if(Aw<8){Aj.append(($.substitute(Aq,Ay)));Aw++;}});Aj.append($('<div class="clear"/>'));Ap=Ak;An=true;Am();};var Am=this.open=function(){AR.stop();if(H){var Av=H.omniPlayer.getStatus().state;if(Av=="playing"){H.pauseToggle();}}As=parseInt(AW.css("height"),10);Ak.css({left:-parseInt(Ap.css("width"),10)+"px"});AW.css({height:(As-10)+"px"});Ar(false,function(){Ak.animate({left:0+"px"});AW.animate({height:(parseInt(Ap.css("height"),10)-10)+"px"},function(){n.css("display","none");});});V();};var At=this.close=function(){n.css("display","block");Ak.animate({left:Ap.css("width")});AW.animate({height:(As-10)+"px"});Ar(true,function(){AW.css({height:"inherit"});Ae(u[r]);});};var Ar=function(Av,Ax){var Aw={opacity:Av?1:0};n.animate(Aw);X.animate(Aw);AW.find(".audio-controls").animate(Aw);AB.animate(Aw);Ac.animate(Aw);Ax();};Au();};var N=function(Am){var Al=$(Am.currentTarget);var Ak=$.inArray(Am.currentTarget,c);var Ai=u[Ak].thumb.el.clone();if(u[Ak].thumb){AU(u[Ak].thumb);Ai.css({position:"absolute",opacity:0,zIndex:10});AW.find(".thumb-shown").remove();AW.append(Ai);Ai.addClass("thumb-shown");var Ah=parseInt(Al.css("width"),10);var Aj=parseInt(Al.css("height"),10);Ai.offset({left:Al.offset().left-parseInt(Ai.css("width"),10)/2+Ah/2,top:Al.offset().top+Aj+10});Ai.stop().animate({opacity:1});}};var AF=function(){AW.find(".thumb-shown").remove();};var Ae=function(Ah){AR.stop();var Ai=[];if(Ah){if(!Ah.standard.loadedStatus){Ai.push(Ah.callbackItem);}}$.each(u,function(Ak,Aj){if(!Aj.standard.loadedStatus){Ai.push(Aj.callbackItem);}});AR.run(Ai);};var p=function(Ai,Ah){if(Ai){$(Ai).on(T.standard_LOADED,function(){a(Ai);});var Aj=function(){if(Ah&&AR.indexOf(Ah)==0&&!AR.isRunning()){AR.run();}};Ai.standard.el.on("error",function(){Aj();});$(Ai).on(T.standard_LOADED,Aj);$(Ai).on(T.THUMB_LOADED,function(){AU(Ai.thumb);});Ai.loadPhoto("standard");Ai.loadPhoto("thumb");}};var a=function(Ah){if(Ah){z(Ah.standard,(r==$.inArray(Ah,u)));Ah.standard.el.css("opacity",1);}};var o=function(Am,Al,Ai,Ak){if(Am>=u.length){Am=u.length-1;if(Ad){Ad.open();}else{Ad=new E();}return null;}Am=Am<0?0:Am;var Ar=(Am+1);AT.html(Ar);var Ap=u[Am].standard;var Aj=u[r].standard;var An=parseInt(n.css("width"),10);if(!Ap.loadedStatus){Ae(u[Am]);}z(Ap,false);if(Al){if(Math.abs(r-Am)<2&&x.filter(":animated").length<1){z(Ap,true);}x.stop().animate({left:Am*-An},500,function(){z(Ap,true,250);});}else{x.stop().css({left:Am*-An},function(){z(Ap,true);});}if(Am!=r||Ai){var Ah=u[Am];if(Am!=r){z(Aj,false,250,true);}AY.permalink.attr("href",AA.permaLinkURL?AA.permaLinkURL:"#photo="+Am);AY.buy.css("display",Ah.config.buyURL?"block":"none");AY.buy.off("click");AY.buy.on("click",function(){TWP.Util.Fotomoto.buyPhoto(Ah.config.images.standard.url);});AY.share.find("a").attr("href",window.location.href);AY.share.find("a").attr("title",AA.title);j.find("li").remove();var Aq=Ah.config.relatedLinks.concat(AA.relatedLinks);if(Aq.length>0){AW.find(".related-links-title").css("display","block");$.each(Aq,function(As,At){j.append($("<li/>").append($("<a/>",{href:At.url,text:At.title})));});}else{AW.find(".related-links-title").css("display","none");}Ac.animate({opacity:0},250,function(){P(Ah);});c.removeClass("on");$(c[Am]).addClass("on");Q(Math.floor(Am/Aa));if(L.playAds){b++;if(!(b%L.photosPerBigBoxAd)||S){clearTimeout(AX);S=true;AX=setTimeout(function(){S=false;placeAd2(commercialNode,"bigbox","AJAX","");},1000);}if(!(b%L.photosPerLeaderBoardAd)||J){clearTimeout(AH);J=true;AH=setTimeout(function(){J=false;placeAd2(commercialNode,"leaderboard","AJAX","");},1500);}}if(!!window.s){if(!!s.sendPageViewToOmniture&&!Ai){wp_page_num=Ar;s.sendPageViewToOmniture({events:"event1",referrer:"http://www.washingtonpost.com/",prop14:Ar,prop35:"washingtonpost.com",eVar35:"washingtonpost.com"});}}if(g){try{g.setParameters({startPhoto:Am});}catch(Ao){}}if(("#photo="+Ar!=AQ.hash)||(window.location.hash==null)){window.location.hash="photo="+Ar;}if(navigator.userAgent.match(/(MSIE)/)&&Ai){h.css("right",0);h.animate({right:-66+"px",duraton:10});}}r=Am;if(AM.playPause.hasClass("playing")&&!Ak){y(0);}if(H&&k&&!Ak){H.seek(Ah.config.timeIndex/1000);}M();return r;};var P=function(Ah){if(Ah.config.credits&&Ah.config.credits[0]){if(AP.slash){AP.slash.css("display",(Ah.config.credits[0].name&&Ah.config.credits[0].organization)?"inline":"none");}AP.name.html(Ah.config.credits[0].name?Ah.config.credits[0].name:"");AP.credit.html(Ah.config.credits[0].credit?Ah.config.credits[0].credit:"");AP.organization.html(Ah.config.credits[0].organization?Ah.config.credits[0].organization:"");AP.headline.html(Ah.config.title?Ah.config.title:"");AP.cutLine.html(Ah.config.blurb?Ah.config.blurb:"");Ac.animate({opacity:1},250);}};var Q=function(Ai){var Ah=Math.floor((c.size()-1)/Aa);Ai=Ai<0?0:Ai;Ai=Ai>Ah?Ah:Ai;AV.animate({left:(Ai*-parseInt($(c[0]).css("width"),10)*Aa)+"px"});if(Ai==0){F.removeClass("scrollable");}else{F.addClass("scrollable");}if(Ai==Ah){h.removeClass("scrollable");}else{h.addClass("scrollable");}AE=Ai;};var AJ=function(Aj,Ai){var Ah=r;$.each(u,function(Al,Ak){if(Ak.config.timeIndex/1000<Ai.position){Ah=Al;return ;}});if(Ah!=r){o(Ah,true,false,true);}};var AU=function(Ah){var Ai=O(Ah.el,Ah.originalSize.width/Ah.originalSize.height,115,70);Ah.el.css({width:Ai.width,height:Ai.height});return Ai;};var z=function(Ai,Am,Ah){var Aj=Ah?Ah:0;var Ak=parseInt(n.css("height"),10);var An=parseInt(n.css("width"),10);var Al=An;Am=!!Am;if(!Am){Al=Al/2;Ak=Ak/2;}var Ap=O(Ai.el,Ai.originalSize.width/Ai.originalSize.height,Al,Ak);Ap.x+=Am?0:Z;Ap.y+=Am?0:Ak/2;var Ao={marginLeft:Math.ceil(Ap.x),marginRight:Math.ceil(Ap.x),marginTop:Ap.y,marginBottom:Ap.y,width:Math.floor(Ap.width),height:Ap.height};Ao.marginRight=(Ao.marginLeft+Ao.width+Ao.marginRight)==An?Ao.marginRight:Ao.marginRight-(Ao.marginLeft+Ao.width+Ao.marginRight-An);if(Aj>0){Ai.el.stop().animate(Ao,Aj);}else{if(Ai.el.filter(":animated").length==0){Ai.el.css(Ao);}}return Ap;};var O=function(Al,Ak,Aj,Ah){var Ai={width:0,height:0,x:0,y:0};if((Aj/Ah)>=Ak){Ai.height=Ah;Ai.width=Ah*Ak;Ai.x=(Aj-Ai.width)/2;Ai.y=0;}else{Ai.width=Aj;Ai.height=Aj*(1/Ak);Ai.y=(Ah-Ai.height)/2;Ai.x=0;}return Ai;};var M=function(){var Ai=parseInt(AW.find(".numbers-slide li a").css("width"),10);var Aj=parseInt(I.css("width"),10)-parseInt(F.css("width"),10)*2;Aa=Math.floor(Aj/Ai);var Ah=c.size()<Aa?c.size():Aa;d.animate({width:(Ah*Ai)+"px"});};B.call(this);};